# coding=utf-8
# *** WARNING: this file was generated by pulumi-language-python. ***
# *** Do not edit by hand unless you're certain you know what you are doing! ***

import builtins as _builtins
import warnings
import sys
import pulumi
import pulumi.runtime
from typing import Any, Mapping, Optional, Sequence, Union, overload
if sys.version_info >= (3, 11):
    from typing import NotRequired, TypedDict, TypeAlias
else:
    from typing_extensions import NotRequired, TypedDict, TypeAlias
from . import _utilities

__all__ = [
    'GetDatacentersResult',
    'AwaitableGetDatacentersResult',
    'get_datacenters',
    'get_datacenters_output',
]

@pulumi.output_type
class GetDatacentersResult:
    """
    A collection of values returned by getDatacenters.
    """
    def __init__(__self__, datacenters=None, id=None):
        if datacenters and not isinstance(datacenters, list):
            raise TypeError("Expected argument 'datacenters' to be a list")
        pulumi.set(__self__, "datacenters", datacenters)
        if id and not isinstance(id, str):
            raise TypeError("Expected argument 'id' to be a str")
        pulumi.set(__self__, "id", id)

    @_builtins.property
    @pulumi.getter
    def datacenters(self) -> Sequence[_builtins.str]:
        """
        The list of datacenters known. The datacenters will be sorted
        in ascending order based on the estimated median round trip time from the server
        to the servers in that datacenter.
        """
        return pulumi.get(self, "datacenters")

    @_builtins.property
    @pulumi.getter
    def id(self) -> _builtins.str:
        """
        The provider-assigned unique ID for this managed resource.
        """
        return pulumi.get(self, "id")


class AwaitableGetDatacentersResult(GetDatacentersResult):
    # pylint: disable=using-constant-test
    def __await__(self):
        if False:
            yield self
        return GetDatacentersResult(
            datacenters=self.datacenters,
            id=self.id)


def get_datacenters(opts: Optional[pulumi.InvokeOptions] = None) -> AwaitableGetDatacentersResult:
    """
    The `get_datacenters` data source returns the list of all knwown Consul
    datacenters.

    ## Example Usage

    ```python
    import pulumi
    import pulumi_consul as consul
    import pulumi_std as std

    all = consul.get_datacenters()
    # Register a prepared query in each of the datacenters
    myapp_query = []
    for range in [{"key": k, "value": v} for [k, v] in enumerate(std.toset(input=all.datacenters).result)]:
        myapp_query.append(consul.PreparedQuery(f"myapp-query-{range['key']}",
            name="myquery",
            datacenter=range["key"],
            only_passing=True,
            near="_agent",
            service="myapp",
            tags=[
                "active",
                "!standby",
            ],
            failover={
                "nearest_n": 3,
                "datacenters": [
                    "us-west1",
                    "us-east-2",
                    "asia-east1",
                ],
            },
            dns={
                "ttl": "30s",
            }))
    ```
    """
    __args__ = dict()
    opts = pulumi.InvokeOptions.merge(_utilities.get_invoke_opts_defaults(), opts)
    __ret__ = pulumi.runtime.invoke('consul:index/getDatacenters:getDatacenters', __args__, opts=opts, typ=GetDatacentersResult).value

    return AwaitableGetDatacentersResult(
        datacenters=pulumi.get(__ret__, 'datacenters'),
        id=pulumi.get(__ret__, 'id'))
def get_datacenters_output(opts: Optional[Union[pulumi.InvokeOptions, pulumi.InvokeOutputOptions]] = None) -> pulumi.Output[GetDatacentersResult]:
    """
    The `get_datacenters` data source returns the list of all knwown Consul
    datacenters.

    ## Example Usage

    ```python
    import pulumi
    import pulumi_consul as consul
    import pulumi_std as std

    all = consul.get_datacenters()
    # Register a prepared query in each of the datacenters
    myapp_query = []
    for range in [{"key": k, "value": v} for [k, v] in enumerate(std.toset(input=all.datacenters).result)]:
        myapp_query.append(consul.PreparedQuery(f"myapp-query-{range['key']}",
            name="myquery",
            datacenter=range["key"],
            only_passing=True,
            near="_agent",
            service="myapp",
            tags=[
                "active",
                "!standby",
            ],
            failover={
                "nearest_n": 3,
                "datacenters": [
                    "us-west1",
                    "us-east-2",
                    "asia-east1",
                ],
            },
            dns={
                "ttl": "30s",
            }))
    ```
    """
    __args__ = dict()
    opts = pulumi.InvokeOutputOptions.merge(_utilities.get_invoke_opts_defaults(), opts)
    __ret__ = pulumi.runtime.invoke_output('consul:index/getDatacenters:getDatacenters', __args__, opts=opts, typ=GetDatacentersResult)
    return __ret__.apply(lambda __response__: GetDatacentersResult(
        datacenters=pulumi.get(__response__, 'datacenters'),
        id=pulumi.get(__response__, 'id')))
